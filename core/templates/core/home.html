{% extends "core/base.html" %}
{% load static %}

{% block title %}HospedAI — Painel{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'core/css/home.css' %}">

<section class="hero">
  <div class="hero__text">
    <h1>Bem-vindo ao <span>HospedAI</span></h1>
    <p>Seu hub para gerenciar quartos, reservas e ocupação — rápido, bonito e no padrão premium.</p>

    <div class="hero__cta">
      <a href="{% url 'listar_quartos' %}" class="btn btn-primary">Ver Quartos</a>
      <a href="{% url 'nova_reserva' %}" class="btn btn-outline">Criar Reserva</a>
      <a href="{% url 'calendario_quarto2' %}" class="btn btn-ghost">Calendário</a>
    </div>
  </div>

  <div class="hero__illustration">
    <img src="{% static 'core/img/logo-black-removebg-preview.png' %}" alt="HospedAI">
  </div>
</section>

<section class="kpis">
  <div class="kpi">
    <div class="kpi__label">Quartos Ativos</div>
    <div class="kpi__value">{{ totais.quartos_ativos }}</div>
  </div>
  <div class="kpi">
    <div class="kpi__label">Ocupados Hoje</div>
    <div class="kpi__value">{{ totais.ocupados_hoje }}</div>
  </div>
  <div class="kpi">
    <div class="kpi__label">Livres Hoje</div>
    <div class="kpi__value">{{ totais.livres_hoje }}</div>
  </div>
  <div class="kpi">
    <div class="kpi__label">Check-ins Hoje</div>
    <div class="kpi__value">{{ totais.checkins_hoje }}</div>
  </div>
  <div class="kpi">
    <div class="kpi__label">Check-outs Hoje</div>
    <div class="kpi__value">{{ totais.checkouts_hoje }}</div>
  </div>
</section>

<section class="quick-actions">
  <h2>Ações rápidas</h2>
  <div class="qa__grid">
    <a class="qa__card" href="{% url 'criar_quarto' %}">
      <div class="qa__icon">🛏️</div>
      <div class="qa__title">Cadastrar quarto</div>
      <p>Cadastre novos quartos e defina tarifas e serviços.</p>
    </a>

    <a class="qa__card" href="{% url 'nova_reserva' %}">
      <div class="qa__icon">📝</div>
      <div class="qa__title">Nova reserva</div>
      <p>Crie reservas com data/hora e acompanhe o status.</p>
    </a>

    <a class="qa__card" href="{% url 'calendario_quarto2' %}">
      <div class="qa__icon">📅</div>
      <div class="qa__title">Calendário</div>
      <p>Veja a disponibilidade e ocupação por dia do mês.</p>
    </a>

    <a class="qa__card" href="{% url 'listar_quartos' %}">
      <div class="qa__icon">📋</div>
      <div class="qa__title">Listar quartos</div>
      <p>Filtre por datas e veja quais estão disponíveis.</p>
    </a>
  </div>
</section>

<section class="recent-reservations">
  <h2>Últimas Reservas</h2>
  {% if ultimas_reservas %}
  <ul class="reserva-list">
    {% for r in ultimas_reservas %}
      <li class="reserva-item">
        <div class="reserva-info">
          <strong>{{ r.nome_cliente }}</strong> —
          {{ r.quarto.tipo }} {{ r.quarto.numero }}
        </div>
        <div class="reserva-dates">
          {{ r.data_entrada|date:"d/m/Y H:i" }} → {{ r.data_saida|date:"d/m/Y H:i" }}
        </div>
        <span class="status {{ r.status }}">{{ r.status|title }}</span>
      </li>
    {% endfor %}
  </ul>
  <div class="ver-todas">
  <a href="{% url 'nova_reserva' %}" class="btn-ver-todas">➜ Ver todas reservas</a>
</div>
  {% else %}
    <p>Nenhuma reserva registrada ainda.</p>
  {% endif %}
</section>


{% if not tem_quartos %}
<section class="onboarding">
  <div class="onb__card">
    <h3>Comece em 3 passos</h3>
    <ol>
      <li>Cadastre seu primeiro quarto <a href="{% url 'criar_quarto' %}">aqui</a>.</li>
      <li>Adicione serviços e fotos para destacar a oferta.</li>
      <li>Crie sua primeira reserva em <a href="{% url 'nova_reserva' %}">Nova reserva</a>.</li>
    </ol>
    <p>Dica: use o <a href="{% url 'calendario_quarto2' %}">Calendário</a> para visualizar lotação e prever picos de demanda.</p>
  </div>
</section>
{% endif %}

<section class="promo">
  <div class="promo__card">
    <h2>HospedAI Premium</h2>
    <p>Design premium, performance e produtividade. Integrações, relatórios e experiência moderna — tudo num só lugar.</p>
    <div>
      <a class="btn btn-primary" href="{% url 'calendario_quarto2' %}">Abrir Calendário</a>
      <a class="btn btn-outline" href="{% url 'listar_quartos' %}">Explorar Quartos</a>
    </div>
  </div>
</section>
{% endblock %}
